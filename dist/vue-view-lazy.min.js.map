{"version":3,"sources":["webpack:///webpack/bootstrap 4b72f0e8bc23c35bc466","webpack:///./index.js","webpack:///./src/v-view-lazy.js"],"names":["vViewLazy","view","install","Vue","options","directive","bind","el","vnode","setAttribute","inserted","observer","IntersectionObserver","change","loadingImg","loading","intersectionRatio","dataset","tagName","toLowerCase","def","aftLoadImg","value","then","innerText","res","name","src","observe","url","oImg","Image","onload","error","console","log","unobserve"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AC7DA;;;;;;AAEO,IAAMA,gCAAYC,mBAAlB,C;;;;;;;;;;;;kBCFQ;AACXC,WADW,mBACHC,GADG,EACY;AAAA,YAAXC,OAAW,uEAAH,EAAG;;AACnBD,YAAIE,SAAJ,CAAc,WAAd,EAA2B;AACvBC,gBADuB,gBAClBC,EADkB,EACfD,KADe,EACVE,KADU,EACJ;AACfD,mBAAGE,YAAH,CAAgB,WAAhB,EAA4B,OAA5B,EADe,CACsB;AACxC,aAHsB;AAIvBC,oBAJuB,oBAIdH,EAJc,EAIXD,IAJW,EAINE,KAJM,EAIA;AACnB,oBAAMG,WAAW,IAAIC,oBAAJ,CAAyB,UAASC,MAAT,EAAgB;AAAC;AACvD,wBAAMC,aAAaV,QAAQW,OAAR,IAAmB,EAAtC;AACA,wBAAGF,OAAO,CAAP,EAAUG,iBAAV,GAA4B,CAA5B,IAA+BT,GAAGU,OAAH,CAAWhB,IAAX,KAAkB,OAApD,EAA4D;AACxDM,2BAAGU,OAAH,CAAWhB,IAAX,GAAkB,MAAlB;AACA,4BAAGM,GAAGW,OAAH,CAAWC,WAAX,OAA2B,KAA9B,EAAoC;AAChCb,iCAAKc,GAAL,CAASC,UAAT,CAAoBd,EAApB,EAAuBD,KAAKgB,KAA5B,EAAkCX,QAAlC,EADgC,CACa;AAChD,yBAFD,MAEK;AACDL,iCAAKgB,KAAL,CAAWC,IAAX,CAAgB;AAAA,uCAAKhB,GAAGiB,SAAH,GAAeC,IAAIC,IAAxB;AAAA,6BAAhB,EADC,CAC4C;AAChD;AACJ,qBAPD,MAOM,IAAGb,OAAO,CAAP,EAAUG,iBAAV,IAA6B,CAA7B,IAAgCT,GAAGU,OAAH,CAAWhB,IAAX,KAAkB,OAArD,EAA6D;AAC/DM,2BAAGoB,GAAH,GAASb,UAAT;AACH;AACJ,iBAZgB,CAAjB;AAaAH,yBAASiB,OAAT,CAAiBrB,EAAjB,EAdmB,CAcE;AACxB,aAnBsB;AAoBvBc,sBApBuB,sBAoBZd,EApBY,EAoBRsB,GApBQ,EAoBJlB,QApBI,EAoBK;AACxB,oBAAImB,OAAO,IAAIC,KAAJ,EAAX;AACAD,qBAAKE,MAAL,GAAc,YAAW;AACrBzB,uBAAGoB,GAAH,GAASG,KAAKH,GAAd,CADqB,CACF;AACtB,iBAFD;AAGAG,qBAAKG,KAAL,GAAa,YAAU;AACnBC,4BAAQC,GAAR,CAAY,QAAZ;AACH,iBAFD;AAGAL,qBAAKH,GAAL,GAAWE,GAAX,CARwB,CAQR;AAChBlB,yBAASyB,SAAT,CAAmB7B,EAAnB,EATwB,CASD;AAC1B;AA9BsB,SAA3B;AAgCH;AAlCU,C","file":"vue-view-lazy.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4b72f0e8bc23c35bc466","import view from './src/v-view-lazy'\r\n\r\nexport const vViewLazy = view;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","export default {\r\n    install(Vue,options={}){\r\n        Vue.directive('view-lazy', {\r\n            bind(el,bind,vnode){\r\n                el.setAttribute('data-view','false');//设置标志\r\n            },\r\n            inserted(el,bind,vnode){\r\n                const observer = new IntersectionObserver(function(change){//该方法是异步自动监听,消耗性能较小\r\n                    const loadingImg = options.loading || '';\r\n                    if(change[0].intersectionRatio>0&&el.dataset.view==='false'){\r\n                        el.dataset.view = 'true';\r\n                        if(el.tagName.toLowerCase()==='img'){\r\n                            bind.def.aftLoadImg(el,bind.value,observer)  //处理图片下载函数\r\n                        }else{\r\n                            bind.value.then(res=>el.innerText = res.name)//处理函数(建议异步请求的函数)\r\n                        }\r\n                    }else if(change[0].intersectionRatio<=0&&el.dataset.view==='false'){\r\n                        el.src = loadingImg;\r\n                    }\r\n                });\r\n                observer.observe(el);//开始监听该元素\r\n            },\r\n            aftLoadImg(el, url,observer){\r\n                var oImg = new Image();\r\n                oImg.onload = function() {\r\n                    el.src = oImg.src; //下载完成后将该图片赋给目标obj目标对象\r\n                };\r\n                oImg.error = function(){\r\n                    console.log('图片读取错误');\r\n                };\r\n                oImg.src = url; //oImg对象先下载该图像\r\n                observer.unobserve(el);//移除该元素的监听\r\n            },\r\n        })\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/v-view-lazy.js"],"sourceRoot":""}